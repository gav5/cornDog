<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chart of Accounts</title>
    <link rel="stylesheet" href="bower_components/materialize/dist/css/materialize.min.css">
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
<style>

</style>

<div class="container">
    <div class="row">
        <div class="col s12">
            <h3 style="text-align: center">Chart of Accounts</h3>
            <table class="striped" id="chartOfAccounts">
                <thead>
                <th data-field="name">Account Name</th>
                <th data-field="type">Account Type</th>
                <th data-field="side">Normal Side</th>
                <th data-field="balance">Initial Balance</th>
                <th data-field="aNumber">Account Number</th>
                <th data-field="creator">Added By</th>
                <th data-field="dateAdded">Date Added</th>
                <th data-field="activity">Activity</th>
                <th data-field="order">Order</th>
                <th data-field="group">Sub Group</th>
                <th data-field="desc">Description</th>
                </thead>
                <tbody>
                </tbody>
            </table>
            <br>
            <!--Add Account Button and Modal Dialog-->
            <a class="waves-effect waves-light btn" href="#addAccountModal">Add Account</a>
            <div id="addAccountModal" class="modal" style="min-height: 70vh;">
                <form method="POST" id="addAccountForm">
                    <div class="modal-content" style="min-height: 64vh;">
                        <h5 style="text-align: center">Add an Account</h5>
                        <div class="row">
                            <div class="input-field col s12 m4 l2">
                                <input name="accountName" id="accountName" type="text" class="validate">
                                <label for="accountName">Account Name</label>
                            </div>
                            <div class="input-field col s12 m4 l2">
                                <select name="accountType" id="accountType">
                                    <option value="" disabled selected>Choose an option</option>
                                    <option value="asset">Asset</option>
                                    <option value="liability">Liability</option>
                                    <option value="ownersEquity">Owners Equity</option>
                                </select>
                                <label>Account Type</label>
                            </div>
                            <div class="input-field col s12 m4 l2">
                                <select name="normalSide" id="normalSide" class="validate">
                                    <option value="" disabled selected>Choose an option</option>
                                    <option value="left">Left</option>
                                    <option value="right">Right</option>
                                </select>
                                <label>Normal Side</label>
                            </div>
                            <div class="input-field col s12 m4 l2">
                                <input name="initialBalance" id="initialBalance" step='0.01' value='0.00'
                                       placeholder='0.00' type="number"
                                       class="validate">
                                <label for="initialBalance">Initial Balance</label>
                            </div>
                            <div class="input-field col s12 m4 l2">
                                <input name="accountNumber" id="accountNumber" type="text" class="validate">
                                <label for="accountNumber">Account Number</label>
                            </div>
                            <div class="input-field col s12 m4 l2">
                                <input name="addedBy" id="addedBy" type="text" class="validate">
                                <label for="addedBy">Added By</label>
                            </div>
                            <div class="input-field col s12 m4 l2">
                                <input name="dateAdded" id="dateAdded" type="date" class="datepicker">
                                <label for="dateAdded">Date Added</label>
                            </div>
                            <div class="input-field col s12 m4 l2">
                                <input name="activity" id="activity" type="text" class="validate">
                                <label for="activity">Activity</label>
                            </div>
                            <div class="input-field col s12 m4 l2">
                                <input name="order" id="order" type="text" class="validate">
                                <label for="order">Order</label>
                            </div>
                            <div class="input-field col s12 m4 l2">
                                <select name="subGroup" id="subGroup" class="validate">
                                    <option value="" disabled selected>Choose an option</option>
                                    <option value="current">Current</option>
                                    <option value="long-term">Long-Term</option>
                                </select>
                                <label>Sub Group</label>
                            </div>
                            <div class="input-field col s12 m8 l4">
                                <textarea name="description" id="description" class="materialize-textarea"></textarea>
                                <label for="description">Description</label>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input class="modal-action modal-close waves-effect waves-green btn-flat focus" type="submit"
                               value="Submit" name="submit" class="submit" id="submit"/>
                        <a href="#!"
                           class="modal-action modal-close waves-effect waves-green btn-flat focus">Dismiss</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!--Jquery and Materializecss-->
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/materialize/dist/js/materialize.min.js"></script>
<script src="bower_components/dynatable/jquery.dynatable.js"></script>
<script src="bower_components/jquery-serialize-object/dist/jquery.serialize-object.min.js"></script>
<script>
    //Initalize Materializecss
    $(document).ready(function () {
        $('.modal').modal();
        $('select').material_select();
    });
    $('.datepicker').pickadate({
        selectMonths: true, // Creates a dropdown to control month
        selectYears: 15 // Creates a dropdown of 15 years to control year
    });

    //Initialize Table
    var someObj = [
        {
            accountName: "Cash",
            accountType: 'Asset',
            normalSide: 'Left',
            initialBalance: '0.00',
            accountNumber: '101',
            addedBy: 'Mike',
            dateAdded: '2/11/17',
            activity: "Active",
            order: "1",
            subGroup: 'Short-Term',
            description: 'Cold hard cash'
        }
    ];
    $('#chartOfAccounts').dynatable({
        dataset: {
            records: someObj
        },
        copyHeaderClass: true
    });

    //Catch Submit
    $(function () { //shorthand document.ready function
        $('#addAccountForm').on('submit', function (e) { //use on if jQuery 1.7+
            e.preventDefault();  //prevent form from submitting
            var data = $("#addAccountForm :input").serializeObject();
            someObj.push(data);
            var dynatable = $('#chartOfAccounts').data('dynatable')
            dynatable.records.updateFromJson({records: someObj});
            dynatable.records.init()
            dynatable.process();
            $("#addAccountForm").reset();
        });
    });

</script>
</body>
</html>